namespace("showDialog");define(function(){var W=milo,I,P,H,D="",O=null,G=null,U=null,Z=null,B=null,b=null,c=false,A=false,K=false,a=W.browser,E=a.msie,F=a.version,S=E&&F=="6.0",N=E&&F=="9.0",C=a.safari,R=window,L=document,X=L.body,Q=L.documentElement,V="_PopupIframe_",J="_PopupMsg_",T="_overlay_";var Y={show:function(e){var M=(typeof(e)==="object")?e:{},d="auto";this.id=M.id||null;this.bgcolor=M.bgcolor||"#111";this.opacity=M.opacity||70;this.src=M.src||null;this.fixed=M.fixed||false;this.iTop=M.iTop||d;this.iWidth=M.iWidth||d;this.iHeight=M.iHeight||d;this.sMsg=M.sMsg||null;this.sClass=M.sClass||null;this.sStyles=M.sStyle||"padding:10px;border:4px solid #dedede;background-color:#fff";this.sTime=M.sTime||null;this.delayPop=M.delayPop||false;this.sPzIndex=M.PopzIndex||9999;this.isNoAccessible=M.isNoAccessible||false;if(this.sPzIndex<9){this.sPzIndex=9}this.onPopupCallback=M.onPopupCallback||null;this.onCloseCallback=M.onCloseCallback||null;this.hasFrame=M.bFrame||false;if(typeof(e)=="string"&&e!=null&&e!=""){this.id=e}if(arguments.length==4){this.src=arguments[0];this.iWidth=arguments[1];this.iHeight=arguments[2]}if(this.id==null&&this.src==null&&this.sMsg==null){return}if(K){this.hide({isNoCloseOverLay:true})}if(this.src!=null){this.id=V;D="iframe";return this.popupInit()}if(this.sMsg!=null){this.id=J;D="message";return this.popupInit()}if(this.id!=null){U=W.g(this.id);D="dialog";return this.popupInit()}},popupInit:function(){var e=this.onPopupCallback,M=this.sPzIndex,k=this,g,h,i,f,d,j;if(typeof(e)==="function"){e()}if(H===undefined){H=W.g(T)}if(!c){if(H){W.setStyle(H,{backgroundColor:this.bgcolor,zIndex:M-1,display:"block"})}else{this.overlay()}}if(D==="iframe"){if(!W.g(V)){g=L.createElement("div");H.parentNode.insertBefore(g,H)}else{g=W.g(V).parentNode}g.style.display="none";h=L.createElement("iframe");h.setAttribute("allowtransparency","true");h.setAttribute("scrolling","no");h.setAttribute("frameborder","0");h.setAttribute("height",this.iHeight);h.setAttribute("width",this.iWidth);h.setAttribute("id",V);h.src=this.src;if(h.attachEvent){h.attachEvent("onload",function(){k.ifrAutoHeight(h)})}else{h.onload=function(){k.ifrAutoHeight(h)}}if(!this.delayPop){g.style.display="block"}g.innerHTML="";g.appendChild(h);U=g}if(D==="message"){if(!W.g(J)){i=L.createElement("div");i.setAttribute("id",J);H.parentNode.insertBefore(i,H)}else{i=W.g(J)}i.style.cssText=this.sStyles;if(this.sClass!=null){f=E?"className":"class";i.setAttribute(f,this.sClass)}i.style.display="none";i.innerHTML=this.sMsg;if(!this.delayPop){i.style.display="block"}if(this.sTime!=null){if(!K){clearTimeout(j)}j=setTimeout(function(){k.hide()},this.sTime)}else{O=function(l){var m;l=l||R.event;m=l.target||l.srcElement;if(m.id===T){W.stopPropagation(l);k.hide()}};W.addEvent(H,"click",O)}U=i}if(this.delayPop){U.style.display="none"}else{U.style.display="block"}W.setStyle(U,{visibility:"visible",position:"absolute",zIndex:M,left:"50%",top:"50%"});U.setAttribute("role","dialog");U.tabIndex=-1;if(!this.isNoAccessible){B=function(l){var m;l=l||R.event;m=l.target||l.srcElement;if(K&&!U.contains(m)){W.stopPropagation(l);W.setStyle(U,{display:"block",visibility:"visible"});setTimeout(function(){try{if(U&&U.offsetHeight>0){U.focus()}}catch(n){}},250)}};Z=L.activeElement;L.onfocus=B;if(L.addEventListener){L.addEventListener("focus",B,true)}else{L.onfocusin=B}b=function(m){var l;m=m||R.event;l=m.keyCode||m.which;if(K&&l==27&&!this.isNoAccessible){k.hide()}};W.addEvent(L,"keyup",b,true)}if(!this.delayPop){this.adjust()}},popup:function(){var M=U,d;if(this.delayPop){if(D==="iframe"){d=W.g(V).parentNode;d.style.display="block"}M.style.display="block"}this.adjust()},adjust:function(){var f=W.getWinHeight(),e=W.getMaxH(),d=null,g=null,l=this,j=U,k,i,M,h;if(H===undefined){H=W.g(T)}if(j){k=j.offsetWidth;i=j.offsetHeight;if(this.fixed){if(W.isInt(this.iTop)){W.setStyle(j,{top:this.iTop+"px",marginTop:0})}else{j.style.marginTop="-"+i/2+"px"}W.setStyle(j,{position:"absolute",marginLeft:"-"+k/2+"px"})}else{if(i>=f){A=true;if(W.isInt(this.iTop)){M=this.iTop}else{M=X.scrollTop||Q.scrollTop||0;M=M+50}W.setStyle(j,{position:"absolute",top:M+"px",marginLeft:"-"+k/2+"px",marginTop:0});h=i+M;H.style.height=Math.max(h,e)+"px"}else{A=false;S||L.documentMode<7?(j.style.position="absolute"):(j.style.position="fixed");W.setStyle(j,{marginTop:"-"+i/2+"px",marginLeft:"-"+k/2+"px"})}}G=function(){if(d){clearTimeout(d)}d=setTimeout(function(){l.fix_Overlay()},250)};W.addEvent(R,"resize",G);if(E||C){this.fix_Overlay();if(S){this.fixIE6_Center();P=function(){if(g){clearTimeout(g)}g=setTimeout(function(){l.fixIE6_Center()},250)};W.addEvent(R,"scroll",P)}}}K=true},fix_Overlay:function(){var f=W.getMaxW(),M=W.getMaxH(),d=W.getWinHeight(),g=U,j,h;if(H===undefined){H=W.g(T)}if(N&&(!L.documentMode||L.documentMode>8)){f=(f-17)<0?0:f-3}M=(M-3)<0?0:M-3;try{j=g.offsetHeight}catch(i){j=this.iHeight;g=W.g(V)}if(j>=d){A=true;if(W.isInt(this.iTop)){h=this.iTop}else{h=X.scrollTop||Q.scrollTop;h=h+50}W.setStyle(g,{position:"absolute",top:h+"px",marginTop:"0"})}else{A=false}if(E){H.style.width=f+"px"}H.style.height=M+"px"},fixIE6_Center:function(){var M,d=U;if(!A){if(!this.fixed){M=X.scrollTop||Q.scrollTop;U.style.marginTop=parseInt(M-d.offsetHeight/2,10)+"px"}}},ifrAutoHeight:function(M){var d,i,f,g;if(this.iHeight!="auto"){return}f=U;try{d=f.contentWindow.document.body.scrollHeight;i=f.contentWindow.document.documentElement.scrollHeight;g=Math.max(d,i);this.iHeight=win.height=g}catch(h){}W.setStyle(f,{marginTop:"-"+f.offsetHeight/2+"px",marginLeft:"-"+f.offsetWidth/2+"px"});this.fix_Overlay()},hide:function(g){var f=(typeof(g)==="object")?g:{},e=this.onCloseCallback,M=f.cancleCallback||false,d=f.isNoCloseOverLay||false;if(H===undefined){H=W.g(T)}if(G!==null){W.removeEvent(R,"resize",G)}if(S&&P!=null){W.removeEvent(R,"scroll",P)}if(O!==null){W.removeEvent(H,"click",O)}if(b!==null){W.removeEvent(L,"keyup",b)}if(typeof(e)==="function"&&!M){e()}K=false;if(!this.isNoAccessible){if(B!==null){if(L.removeEventListener){L.removeEventListener("focus",B,false)}else{L.onfocus=null}if(L.onfocus=B){L.onfocus=null}}if(Z&&Z.offsetHeight>0){Z.focus()}}if(U===null){switch(D){case"message":U=W.g(J);case"iframe":U=W.g(V);case"dialog":U=W.g(this.id);default:return}}U.style.display="none";if(!d){H.style.display="none"}c=false;return},overlay:function(){var d=W.getMaxH(),f=this.sPzIndex-1,h=this.opacity,g,M,e;if(E){g=parseInt(W.getStyle(X,"marginTop"),10);M=parseInt(W.getStyle(X,"marginBottom"),10);d=d+g+M}H=L.createElement("div");H.setAttribute("id",T);W.setStyle(H,{backgroundColor:this.bgcolor,borderTop:"1px solid "+this.bgcolor,position:"absolute",height:d+"px",zIndex:f,width:"100%",left:"0",top:"0"});if(S||this.hasFrame){e=W.getMaxW();H.style.width=e+"px";H.innerHTML='<iframe style="position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;filter:alpha(opacity=0);z-index:9" src="javascript:void(0)"></iframe>'}if(E&&(!L.documentMode||L.documentMode<9)){H.style.filter="Alpha(opacity="+h+")"}else{H.style.opacity=h/100}c=true;return X.appendChild(H)}};showDialog=Y;return Y});